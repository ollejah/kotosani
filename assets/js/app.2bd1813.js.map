{"version":3,"sources":["webpack:///./app.js","webpack:///./helpers/dom.js","webpack:///./helpers/transition.js","webpack:///./helpers/viewport-scrolling.js","webpack:///./scripts/ZoomImage.js","webpack:///./scripts/service-worker.js"],"names":["module","hot","accept","stickyfilljs__WEBPACK_IMPORTED_MODULE_1___default","a","add","qsa","__webpack_require__","polyfill","$html","qs","$headerNavTrigger","$headerNav","headerNavState","e","window","matchMedia","matches","classList","toggle","on","preventDefault","Array","from","forEach","el","blazy__WEBPACK_IMPORTED_MODULE_2___default","sections","slice","document","addEventListener","io","readyState","remove","removeAttribute","IntersectionObserver","changes","change","target","isIntersecting","unobserve","rootMargin","threshold","item","observe","img","_scripts_ZoomImage__WEBPACK_IMPORTED_MODULE_3__","trigger","endAnimate","querySelector","bind","querySelectorAll","Element","prototype","off","removeEventListener","transition","createElement","transitions","OTransition","MozTransition","WebkitTransition","t","undefined","style","prevent","viewport_scrolling","documentElement","ZoomImage_ZoomImage","ZoomImage","_ref","_classCallCheck","this","root","show","init","_this","open","keyCode","close","src","_ref2","_ref2$alt","alt","_this2","modal","innerHTML","template","body","appendChild","setTimeout","_this3","propertyName","removeChild","offline_plugin_runtime__WEBPACK_IMPORTED_MODULE_0__","onUpdating","onUpdateReady","onUpdated","location","reload","onUpdateFailed","offlineReady","goOffline","navigator","onLine"],"mappings":"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","file":"js/app.2bd1813.js","sourcesContent":["// Enable webpack HMR for extracted reelements\nmodule.hot && module.hot.accept()\n\nimport '@/helpers/dom'\n\n/**\n * Sticky polyfill\n * https://github.com/wilddeer/stickyfill\n */\nimport Stickyfill from 'stickyfilljs'\nStickyfill.add(qsa('.js-sticky'))\n\n/**\n * Smooth Scroll polyfill\n * https://github.com/iamdustan/smoothscroll\n */\nrequire('smoothscroll-polyfill').polyfill()\n\n/**\n * Touch action\n */\n// import { touchAction } from '@/vendors/touch-action'\n// touchAction()\n\n/**\n * Cache base elements\n */\nconst $html = qs('html')\n// const $body = qs('body')\n// const $header = qs('.js-header')\nconst $headerNavTrigger = qs('.js-header-nav-trigger')\nconst $headerNav = qs('.js-header-nav')\n\n/**\n * Header nav trigger\n * открывает/закрывает меню\n *\n * Monitor Events\n * https://developers.google.com/web/tools/chrome-devtools/console/events\n * monitorEvents(document.body, \"click\")\n * unmonitorEvents(document.body)\n *\n * View event listeners registered on objects\n * getEventListeners(document)\n */\nconst headerNavState = e => {\n  // e.preventDefault()\n  if (window.matchMedia('(max-width: 767px)').matches) {\n    // https://developer.mozilla.org/ru/docs/Web/API/Element/classList\n    $html.classList.toggle('is-disabled')\n    $html.classList.toggle('is-menu-open')\n    $headerNavTrigger.classList.toggle('is-active')\n    $headerNav.classList.toggle('is-open')\n    // $headerNav.scrollTop = 0\n  }\n}\n$headerNavTrigger.on('click', e => {\n  e.preventDefault()\n  headerNavState(e)\n})\nArray.from(qsa('.js-header-nav a')).forEach(el =>\n  el.on('click', headerNavState)\n)\n\n/**\n * Lazy load images\n */\nimport Blazy from 'blazy'\nconst bLazy = new Blazy()\n\n/**\n * Observe sections childs if visible into viewport\n */\nconst sections = Array.from(qsa('.l-section > *')).slice(1)\nconst showSections = () => {\n  const io = new IntersectionObserver(\n    changes =>\n      changes.forEach(change => {\n        const target = change.target\n        // console.log(target, change.isIntersecting, change.intersectionRatio)\n        if (change.isIntersecting) {\n          target.classList.add('in-view')\n          io.unobserve(target)\n        }\n      }),\n    {\n      rootMargin: '50px 0px',\n      threshold: 0.01,\n    }\n  )\n  // const sections = Array.from(qsa('.l-section > *'))\n  sections.forEach(item => io.observe(item))\n}\n\n// check inages loaded\n// const imagesHolder = qsa('img[src]')\n// console.log(imagesHolder)\n// imagesHolder.forEach(img => {\n//   const t = img.dataset.src.slice(8, -4)\n//   console.time(t)\n//   img.on('load', e => console.timeEnd(t), false)\n// })\n\n/**\n * Init, check document states\n */\nconsole.time('readyStateComplete')\nconsole.time('readyStateInteractive')\ndocument.addEventListener('readystatechange', () => {\n  console.log(document.readyState)\n  if (document.readyState === 'interactive') {\n    // showSections()\n    console.timeEnd('readyStateInteractive')\n  }\n  if (document.readyState === 'complete') {\n    qs('html').classList.remove('is-loading')\n    qs('.js-offline-ready').removeAttribute('hidden')\n    showSections()\n    console.timeEnd('readyStateComplete')\n  }\n})\n\n/**\n * Class ZoomImage\n */\nimport ZoomImage from '@/scripts/ZoomImage'\nconst imagesLoaded = qsa('[data-src]')\nimagesLoaded.forEach(\n  img =>\n    new ZoomImage({\n      trigger: img,\n      endAnimate: 'visibility',\n      // closeAfter: 500,\n    })\n)\n\n/**\n * Open page form as Modal\n */\n// import OpenFrame from '@/scripts/OpenFrame'\n// qsa('.js-menu a').forEach(\n//   link =>\n//     new OpenFrame({\n//       opener: link,\n//       closeAfter: 500,\n//     })\n// )\n\n/**\n * Offline plugin (ServiceWorker, AppCache) for webpack\n * https://github.com/NekR/offline-plugin/blob/master/docs/runtime.md\n */\nimport './scripts/service-worker'","/**\n * Dom Helpers\n */\n\nwindow.qs = document.querySelector.bind(document);\nwindow.qsa = document.querySelectorAll.bind(document);\nElement.prototype.on = Element.prototype.addEventListener;\nElement.prototype.off = Element.prototype.removeEventListener;\n","/**\n * Transition.end\n * From Modernizr\n */\n\nfunction whichTransitionEvent() {\n  let el = document.createElement(\"fakeelement\");\n  let transitions = {\n    transition: \"transitionend\", // IE10, Opera, Chrome, FF 15+, Saf 7+\n    OTransition: \"oTransitionEnd\",\n    MozTransition: \"transitionend\", // only for FF < 15\n    WebkitTransition: \"webkitTransitionEnd\" // Saf 6, Android Browser\n  };\n  for (let t in transitions) {\n    if (el.style[t] !== undefined) {\n      return transitions[t];\n    }\n  }\n}\n\n// export const transitionEnd = whichTransitionEvent()\nexport default whichTransitionEvent();\n","/** \n * Preventing body scroll for modals in iOS\n * https://benfrain.com/preventing-body-scroll-for-modals-in-ios/\n */\n\nconst prevent = e => e.preventDefault()\n\n// import as viewportScrolling\nexport default {\n  stop: () => {\n    document.documentElement.classList.add('is-disabled')\n    document.documentElement.addEventListener('touchmove', prevent)\n  },\n  start: () => {\n    document.documentElement.classList.remove('is-disabled')\n    document.documentElement.removeEventListener('touchmove', prevent)\n  },\n}","'use strict'\n\nimport '@/helpers/dom'\nimport transitionEnd from '@/helpers/transition'\n// import animationEnd from '@/helpers/animation'\n\n/**  Preventing body scroll for modals in iOS */\nimport viewportScrolling from '@/helpers/viewport-scrolling'\n// import docOffset from '@/helpers/document-offset'\n\n/**\n * Class ZoomImage\n */\nexport default class ZoomImage {\n  constructor({ trigger, endAnimate }) {\n    this.root = qs('html')\n    this.trigger = trigger\n    this.show = false\n    this.endAnimate = endAnimate\n    this.init() // init zoom fn\n  }\n\n  init() {\n    this.trigger.on(\n      'click',\n      e => {\n        e.preventDefault()\n        this.show = true\n        this.open(e.target)\n      },\n      false\n    )\n    /** Bind close to pressed Escape key */\n    document.addEventListener(\n      'keydown',\n      e => {\n        if (this.show && e.keyCode == 27) this.close(e)\n      },\n      false\n    )\n  }\n\n  template({ src, alt = null }) {\n    return `\n      <figure>\n        <img src=\"${src}\">\n        ${alt ? '<figcaption>' + alt + '</figcaption>' : ''}\n      </figure>\n      <button class=\"c-close js-close\">&times;</button>\n    `\n  }\n\n  open(target) {\n    // Store document scroll position\n    // this.docOffset = docOffset.get()\n    viewportScrolling.stop()\n\n    this.modal = document.createElement('div')\n    this.modal.innerHTML = this.template(target)\n    document.body.appendChild(this.modal)\n    this.modal.classList.add('c-overlay-image')\n    setTimeout(() => this.modal.classList.add('is-active'), 10)\n\n    // Закрывает при клике на оверлей\n    this.modal.on('click', e => this.close(e), false)\n\n    // Закрывает при клике на кнопку ✕\n    qs('.js-close').on('click', e => this.close(e), false)\n  }\n\n  close(e) {\n    e.preventDefault()\n    this.show = false\n    viewportScrolling.start()\n    this.modal.classList.remove('is-active')\n    this.modal.on(transitionEnd, e => {\n      if (e.propertyName == this.endAnimate) {\n        document.body.removeChild(this.modal)\n      }\n    })\n  }\n}","/**\n * Offline plugin (ServiceWorker, AppCache) for webpack\n * https://github.com/NekR/offline-plugin/blob/master/docs/runtime.md\n * require('offline-plugin/runtime').install();\n */\n\nimport * as runtime from 'offline-plugin/runtime'\n// runtime.install()\n\nruntime.install({\n  onUpdating: () => {\n    console.info('SW runtime Event:', 'onUpdating')\n  },\n  onUpdateReady: () => {\n    console.info('SW runtime Event:', 'onUpdateReady')\n    // Tells to new SW to take control immediately\n    runtime.applyUpdate()\n  },\n  onUpdated: () => {\n    console.info('SW runtime Event:', 'onUpdated')\n    // Reload the webpage to load into the new version\n    window.location.reload()\n  },\n  onUpdateFailed: () => {\n    console.warn('SW runtime Event:', 'onUpdateFailed')\n  },\n})\n\n// setTimeout(() => runtime.applyUpdate(), 5000)\n\n/**\n * Offline state\n */\n\n/** offlineReady banner */\nconst offlineReady = document.querySelector('.js-offline-ready')\n// offlineReady.removeAttribute('hidden')\n\nfunction goOffline() {\n  if (!navigator.onLine) {\n    offlineReady.classList.add('is-active')\n    // setTimeout(() => offlineReady.classList.remove('is-active'), 10000)\n  } else {\n    offlineReady.classList.remove('is-active')\n  }\n  console.log(navigator.onLine)\n}\n\nwindow.addEventListener('offline', goOffline)\nwindow.addEventListener('online', goOffline)\n\n// Check if device online\n!navigator.onLine && setTimeout(() => goOffline(), 300)\n\nofflineReady.addEventListener('click', e =>\n  offlineReady.classList.remove('is-active')\n)"],"sourceRoot":""}