{"version":3,"sources":["webpack:///./app.js","webpack:///./helpers/dom.js","webpack:///./helpers/transition.js","webpack:///./helpers/animation.js","webpack:///./scripts/ZoomImage.js"],"names":["module","hot","accept","stickyfilljs__WEBPACK_IMPORTED_MODULE_1___default","a","add","qsa","__webpack_require__","polyfill","$html","qs","$headerNavTrigger","$headerNav","on","e","preventDefault","window","matchMedia","matches","classList","toggle","scrollTop","blazy__WEBPACK_IMPORTED_MODULE_2___default","sections","Array","from","slice","document","addEventListener","io","readyState","IntersectionObserver","changes","forEach","change","target","isIntersecting","unobserve","rootMargin","threshold","item","observe","img","_scripts_ZoomImage__WEBPACK_IMPORTED_MODULE_3__","trigger","endAnimate","offline_plugin_runtime__WEBPACK_IMPORTED_MODULE_4__","onUpdating","onUpdateReady","onUpdated","location","reload","onUpdateFailed","querySelector","bind","querySelectorAll","Element","prototype","off","removeEventListener","transition","el","createElement","transitions","OTransition","MozTransition","WebkitTransition","t","undefined","style","animations","animation","OAnimation","MozAnimation","WebkitAnimation","ZoomImage_ZoomImage","ZoomImage","_ref","_classCallCheck","this","root","closer","show","init","_this","open","keyCode","close","src","_ref2","_ref2$alt","alt","_this2","getDocOffset","pageYOffset","documentElement","zoom","innerHTML","template","top","body","appendChild","setTimeout","_this3","remove","propertyName","removeChild"],"mappings":"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","file":"js/app.eb37da6.js","sourcesContent":["// Enable webpack HMR for extracted reelements\nmodule.hot && module.hot.accept()\n\nimport '@/helpers/dom'\n\n/**\n * Sticky polyfill\n * https://github.com/wilddeer/stickyfill\n */\nimport Stickyfill from 'stickyfilljs'\nStickyfill.add(qsa('.js-sticky'))\n\n/**\n * Smooth Scroll polyfill\n * https://github.com/iamdustan/smoothscroll\n */\nrequire('smoothscroll-polyfill').polyfill()\n\n/**\n * Touch action\n */\n// import { touchAction } from '@/vendors/touch-action'\n// touchAction()\n\n/**\n * Cache base elements\n */\nconst $html = qs('html')\n// const $body = qs('body')\n// const $header = qs('.js-header')\nconst $headerNavTrigger = qs('.js-header-nav-trigger')\nconst $headerNav = qs('.js-header-nav')\n\n/**\n * Header nav trigger\n * открывает/закрывает меню\n */\nconst headerNavState = e => {\n  e.preventDefault()\n  if (window.matchMedia('(max-width: 767px)').matches) {\n    console.log('matches')\n    // https://developer.mozilla.org/ru/docs/Web/API/Element/classList\n    $html.classList.toggle('is-disabled')\n    $html.classList.toggle('is-menu-open')\n    $headerNavTrigger.classList.toggle('is-active')\n    $headerNav.classList.toggle('is-open')\n    $headerNav.scrollTop = 0\n  }\n}\n$headerNavTrigger.on('click', headerNavState)\n\n/**\n * Lazy load images\n */\nimport Blazy from 'blazy'\nconst bLazy = new Blazy()\n\n/**\n * Observe sections childs if visible into viewport\n */\nconst sections = Array.from(qsa('.l-section > *')).slice(1)\nconst showSections = () => {\n  const io = new IntersectionObserver(\n    changes =>\n      changes.forEach(change => {\n        const target = change.target\n        console.log(target, change.isIntersecting, change.intersectionRatio)\n        if (change.isIntersecting) {\n          target.classList.add('in-view')\n          io.unobserve(target)\n        }\n      }),\n    { rootMargin: '50% 0%', threshold: [0.25, 0.5, 1.0] }\n  )\n  // const sections = Array.from(qsa('.l-section > *'))\n  sections.forEach(item => io.observe(item))\n}\n\n// check inages loaded\n// const imagesHolder = qsa('img[src]')\n// console.log(imagesHolder)\n// imagesHolder.forEach(img => {\n//   const t = img.dataset.src.slice(8, -4)\n//   console.time(t)\n//   img.on('load', e => console.timeEnd(t), false)\n// })\n\n/**\n * Init, check document states\n */\nconsole.time('readyStateComplete')\nconsole.time('readyStateInteractive')\ndocument.addEventListener('readystatechange', () => {\n  console.log(document.readyState)\n  if (document.readyState === 'interactive') {\n    // showSections()\n    console.timeEnd('readyStateInteractive')\n  }\n  if (document.readyState === 'complete') {\n    // qs('html').classList.remove('is-loading')\n    showSections()\n    console.timeEnd('readyStateComplete')\n  }\n})\n\n/**\n * Class ZoomImage\n */\nimport ZoomImage from '@/scripts/ZoomImage'\nconst imagesLoaded = qsa('[data-src]')\nimagesLoaded.forEach(\n  img =>\n    new ZoomImage({\n      trigger: img,\n      endAnimate: 'visibility',\n      // closeAfter: 500,\n    })\n)\n\n/**\n * Open page form as Modal\n */\n// import OpenFrame from '@/scripts/modal/OpenFrame'\n// qsa('.js-menu a').forEach(\n//   link =>\n//     new OpenFrame({\n//       opener: link,\n//       closeAfter: 500,\n//     })\n// )\n\n/**\n * Offline plugin (ServiceWorker, AppCache) for webpack\n * https://github.com/NekR/offline-plugin/blob/master/docs/runtime.md\n */\n// require('offline-plugin/runtime').install()\nimport * as runtime from 'offline-plugin/runtime'\n// runtime.install()\n\nruntime.install({\n  onUpdating: () => {\n    console.info('SW runtime Event:', 'onUpdating')\n  },\n  onUpdateReady: () => {\n    console.info('SW runtime Event:', 'onUpdateReady')\n    // Tells to new SW to take control immediately\n    runtime.applyUpdate()\n  },\n  onUpdated: () => {\n    console.info('SW runtime Event:', 'onUpdated')\n    // Reload the webpage to load into the new version\n    window.location.reload()\n  },\n  onUpdateFailed: () => {\n    console.warn('SW runtime Event:', 'onUpdateFailed')\n  },\n})","/**\n * Dom Helpers\n */\n\nwindow.qs = document.querySelector.bind(document);\nwindow.qsa = document.querySelectorAll.bind(document);\nElement.prototype.on = Element.prototype.addEventListener;\nElement.prototype.off = Element.prototype.removeEventListener;\n","/**\n * Transition.end\n * From Modernizr\n */\n\nfunction whichTransitionEvent() {\n  let el = document.createElement(\"fakeelement\");\n  let transitions = {\n    transition: \"transitionend\", // IE10, Opera, Chrome, FF 15+, Saf 7+\n    OTransition: \"oTransitionEnd\",\n    MozTransition: \"transitionend\", // only for FF < 15\n    WebkitTransition: \"webkitTransitionEnd\" // Saf 6, Android Browser\n  };\n  for (let t in transitions) {\n    if (el.style[t] !== undefined) {\n      return transitions[t];\n    }\n  }\n}\n\n// export const transitionEnd = whichTransitionEvent()\nexport default whichTransitionEvent();\n","/**\n * Animation end\n * From Modernizr\n */\n\nfunction whichAnimationEvent() {\n  let t,\n    el = document.createElement(\"fakeelement\");\n  let animations = {\n    animation: \"animationend\", // IE10, Opera, Chrome, FF 15+, Saf 7+\n    OAnimation: \"oAnimationEnd\",\n    MozAnimation: \"animationend\", // only for FF < 15\n    WebkitAnimation: \"webkitAnimationEnd\" // Saf 6, Android Browser\n  };\n  for (let t in animations) {\n    if (el.style[t] !== undefined) {\n      return animations[t];\n    }\n  }\n}\n\nexport default whichAnimationEvent();\n","'use strict'\n\nimport '@/helpers/dom'\nimport transitionEnd from '@/helpers/transition'\nimport animationEnd from '@/helpers/animation'\n\n// Getter, Setter document position Y\nconst getOffsetTop = () =>\n  window.pageYOffset || document.documentElement.scrollTop\n\nconst setDocOffset = posy =>\n  (document.documentElement.scrollTop = document.body.scrollTop = posy)\n\n/**\n * Class ZoomImage\n */\nexport default class ZoomImage {\n  constructor({ trigger, endAnimate }) {\n    this.root = qs('html')\n    // this.modal = qs('.js-overlay')\n    this.trigger = trigger\n    this.closer = qs('.js-close')\n    this.show = false\n    this.endAnimate = endAnimate\n    this.init() // init zoom fn\n  }\n\n  init() {\n    this.trigger.on(\n      'click',\n      e => {\n        e.preventDefault()\n        this.show = true\n        this.open(e.target)\n      },\n      false\n    )\n    /** Bind close to pressed Escape key */\n    document.addEventListener(\n      'keydown',\n      e => {\n        if (this.show && e.keyCode == 27) this.close(e)\n      },\n      false\n    )\n  }\n\n  template({ src, alt = null }) {\n    return `\n      <figure>\n        <img src=\"${src}\">\n        ${alt ? '<figcaption>' + alt + '</figcaption>' : ''}\n      </figure>\n      <button class=\"c-close js-close\">&times;</button>\n    `\n  }\n\n  open(target) {\n    // Store document scroll position\n    this.getDocOffset = getOffsetTop()\n\n    this.zoom = document.createElement('div')\n    this.zoom.innerHTML = this.template(target)\n    this.zoom.style.top = `${this.getDocOffset}px`\n    document.body.appendChild(this.zoom)\n    this.zoom.classList.add('c-overlay', 'c-zoomable')\n    setTimeout(() => this.zoom.classList.add('is-active'), 10)\n    this.root.classList.add('is-disabled')\n\n    // Закрывает при клике на оверлей\n    this.zoom.on('click', e => this.close(e), false)\n\n    // Закрывает при клике на кнопку х\n    this.closer.on('click', e => this.close(e), false)\n  }\n\n  close(e) {\n    e.preventDefault()\n    this.show = false\n    this.zoom.classList.remove('is-active')\n    this.zoom.on(transitionEnd, e => {\n      if (e.propertyName == this.endAnimate) {\n        document.body.removeChild(this.zoom)\n      }\n    })\n    this.root.classList.remove('is-disabled')\n  }\n}"],"sourceRoot":""}