{"version":3,"sources":["webpack:///./app.js","webpack:///./helpers/dom.js","webpack:///./helpers/transition.js","webpack:///./helpers/animation.js","webpack:///./scripts/ZoomImage.js","webpack:///./scripts/service-worker.js"],"names":["module","hot","accept","stickyfilljs__WEBPACK_IMPORTED_MODULE_1___default","a","add","qsa","__webpack_require__","polyfill","$html","qs","$headerNavTrigger","$headerNav","headerNavState","e","window","matchMedia","matches","classList","toggle","on","preventDefault","Array","from","forEach","el","blazy__WEBPACK_IMPORTED_MODULE_2___default","sections","slice","document","addEventListener","io","readyState","IntersectionObserver","changes","change","target","isIntersecting","unobserve","rootMargin","threshold","item","observe","img","_scripts_ZoomImage__WEBPACK_IMPORTED_MODULE_3__","trigger","endAnimate","querySelector","bind","querySelectorAll","Element","prototype","off","removeEventListener","transition","createElement","transitions","OTransition","MozTransition","WebkitTransition","t","undefined","style","animations","animation","OAnimation","MozAnimation","WebkitAnimation","prevent","viewportScrolling","documentElement","remove","ZoomImage_ZoomImage","ZoomImage","_ref","_classCallCheck","this","root","closer","show","init","_this","open","keyCode","close","src","_ref2","_ref2$alt","alt","_this2","modal","innerHTML","template","body","appendChild","setTimeout","_this3","propertyName","removeChild","offline_plugin_runtime__WEBPACK_IMPORTED_MODULE_0__","onUpdating","onUpdateReady","onUpdated","location","reload","onUpdateFailed","goOffline","navigator","onLine","offlineReady"],"mappings":"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","file":"js/app.e9d126f.js","sourcesContent":["// Enable webpack HMR for extracted reelements\nmodule.hot && module.hot.accept()\n\nimport '@/helpers/dom'\n\n/**\n * Sticky polyfill\n * https://github.com/wilddeer/stickyfill\n */\nimport Stickyfill from 'stickyfilljs'\nStickyfill.add(qsa('.js-sticky'))\n\n/**\n * Smooth Scroll polyfill\n * https://github.com/iamdustan/smoothscroll\n */\nrequire('smoothscroll-polyfill').polyfill()\n\n/**\n * Touch action\n */\n// import { touchAction } from '@/vendors/touch-action'\n// touchAction()\n\n/**\n * Cache base elements\n */\nconst $html = qs('html')\n// const $body = qs('body')\n// const $header = qs('.js-header')\nconst $headerNavTrigger = qs('.js-header-nav-trigger')\nconst $headerNav = qs('.js-header-nav')\n\n/**\n * Header nav trigger\n * открывает/закрывает меню\n *\n * Monitor Events\n * https://developers.google.com/web/tools/chrome-devtools/console/events\n * monitorEvents(document.body, \"click\")\n * unmonitorEvents(document.body)\n *\n * View event listeners registered on objects\n * getEventListeners(document)\n */\nconst headerNavState = e => {\n  // e.preventDefault()\n  if (window.matchMedia('(max-width: 767px)').matches) {\n    // https://developer.mozilla.org/ru/docs/Web/API/Element/classList\n    $html.classList.toggle('is-disabled')\n    $html.classList.toggle('is-menu-open')\n    $headerNavTrigger.classList.toggle('is-active')\n    $headerNav.classList.toggle('is-open')\n    // $headerNav.scrollTop = 0\n  }\n}\n$headerNavTrigger.on('click', e => {\n  e.preventDefault()\n  headerNavState(e)\n})\nArray.from(qsa('.js-header-nav a')).forEach(el =>\n  el.on('click', headerNavState)\n)\n\n/**\n * Lazy load images\n */\nimport Blazy from 'blazy'\nconst bLazy = new Blazy()\n\n/**\n * Observe sections childs if visible into viewport\n */\nconst sections = Array.from(qsa('.l-section > *')).slice(1)\nconst showSections = () => {\n  const io = new IntersectionObserver(\n    changes =>\n      changes.forEach(change => {\n        const target = change.target\n        // console.log(target, change.isIntersecting, change.intersectionRatio)\n        if (change.isIntersecting) {\n          target.classList.add('in-view')\n          io.unobserve(target)\n        }\n      }),\n    {\n      rootMargin: '50px 0px',\n      threshold: 0.01,\n    }\n  )\n  // const sections = Array.from(qsa('.l-section > *'))\n  sections.forEach(item => io.observe(item))\n}\n\n// check inages loaded\n// const imagesHolder = qsa('img[src]')\n// console.log(imagesHolder)\n// imagesHolder.forEach(img => {\n//   const t = img.dataset.src.slice(8, -4)\n//   console.time(t)\n//   img.on('load', e => console.timeEnd(t), false)\n// })\n\n/**\n * Init, check document states\n */\nconsole.time('readyStateComplete')\nconsole.time('readyStateInteractive')\ndocument.addEventListener('readystatechange', () => {\n  console.log(document.readyState)\n  if (document.readyState === 'interactive') {\n    // showSections()\n    console.timeEnd('readyStateInteractive')\n  }\n  if (document.readyState === 'complete') {\n    // qs('html').classList.remove('is-loading')\n    showSections()\n    console.timeEnd('readyStateComplete')\n  }\n})\n\n/**\n * Class ZoomImage\n */\nimport ZoomImage from '@/scripts/ZoomImage'\nconst imagesLoaded = qsa('[data-src]')\nimagesLoaded.forEach(\n  img =>\n    new ZoomImage({\n      trigger: img,\n      endAnimate: 'visibility',\n      // closeAfter: 500,\n    })\n)\n\n/**\n * Open page form as Modal\n */\n// import OpenFrame from '@/scripts/modal/OpenFrame'\n// qsa('.js-menu a').forEach(\n//   link =>\n//     new OpenFrame({\n//       opener: link,\n//       closeAfter: 500,\n//     })\n// )\n\n/**\n * Offline plugin (ServiceWorker, AppCache) for webpack\n * https://github.com/NekR/offline-plugin/blob/master/docs/runtime.md\n */\nimport './scripts/service-worker'","/**\n * Dom Helpers\n */\n\nwindow.qs = document.querySelector.bind(document);\nwindow.qsa = document.querySelectorAll.bind(document);\nElement.prototype.on = Element.prototype.addEventListener;\nElement.prototype.off = Element.prototype.removeEventListener;\n","/**\n * Transition.end\n * From Modernizr\n */\n\nfunction whichTransitionEvent() {\n  let el = document.createElement(\"fakeelement\");\n  let transitions = {\n    transition: \"transitionend\", // IE10, Opera, Chrome, FF 15+, Saf 7+\n    OTransition: \"oTransitionEnd\",\n    MozTransition: \"transitionend\", // only for FF < 15\n    WebkitTransition: \"webkitTransitionEnd\" // Saf 6, Android Browser\n  };\n  for (let t in transitions) {\n    if (el.style[t] !== undefined) {\n      return transitions[t];\n    }\n  }\n}\n\n// export const transitionEnd = whichTransitionEvent()\nexport default whichTransitionEvent();\n","/**\n * Animation end\n * From Modernizr\n */\n\nfunction whichAnimationEvent() {\n  let t,\n    el = document.createElement(\"fakeelement\");\n  let animations = {\n    animation: \"animationend\", // IE10, Opera, Chrome, FF 15+, Saf 7+\n    OAnimation: \"oAnimationEnd\",\n    MozAnimation: \"animationend\", // only for FF < 15\n    WebkitAnimation: \"webkitAnimationEnd\" // Saf 6, Android Browser\n  };\n  for (let t in animations) {\n    if (el.style[t] !== undefined) {\n      return animations[t];\n    }\n  }\n}\n\nexport default whichAnimationEvent();\n","'use strict'\n\nimport '@/helpers/dom'\nimport transitionEnd from '@/helpers/transition'\nimport animationEnd from '@/helpers/animation'\n\n/**\n * Preventing body scroll for modals in iOS\n * https://benfrain.com/preventing-body-scroll-for-modals-in-ios/\n */\nconst prevent = e => e.preventDefault()\nconst viewportScrolling = {\n  stop: () => {\n    document.documentElement.classList.add('is-disabled')\n    document.documentElement.addEventListener('touchmove', prevent)\n  },\n  start: () => {\n    document.documentElement.classList.remove('is-disabled')\n    document.documentElement.removeEventListener('touchmove', prevent)\n  },\n}\n\n/** Getter, Setter document position Y */\n// const docOffset = {\n//   get: () => {\n//     return window.pageYOffset || document.documentElement.scrollTop\n//   },\n//   set: posy => {\n//     return (document.documentElement.scrollTop = document.body.scrollTop = posy)\n//   },\n// }\n\n/**\n * Class ZoomImage\n */\nexport default class ZoomImage {\n  constructor({ trigger, endAnimate }) {\n    this.root = qs('html')\n    this.trigger = trigger\n    this.closer = qs('.js-close')\n    this.show = false\n    this.endAnimate = endAnimate\n    this.init() // init zoom fn\n  }\n\n  init() {\n    this.trigger.on(\n      'click',\n      e => {\n        e.preventDefault()\n        this.show = true\n        this.open(e.target)\n      },\n      false\n    )\n    /** Bind close to pressed Escape key */\n    document.addEventListener(\n      'keydown',\n      e => {\n        if (this.show && e.keyCode == 27) this.close(e)\n      },\n      false\n    )\n  }\n\n  template({ src, alt = null }) {\n    return `\n      <figure>\n        <img src=\"${src}\">\n        ${alt ? '<figcaption>' + alt + '</figcaption>' : ''}\n      </figure>\n      <button class=\"c-close js-close\">&times;</button>\n    `\n  }\n\n  open(target) {\n    // Store document scroll position\n    // this.docOffset = docOffset.get()\n    viewportScrolling.stop()\n\n    this.modal = document.createElement('div')\n    this.modal.innerHTML = this.template(target)\n    document.body.appendChild(this.modal)\n    this.modal.classList.add('c-overlay-image')\n    setTimeout(() => this.modal.classList.add('is-active'), 10)\n\n    // Закрывает при клике на оверлей\n    this.modal.on('click', e => this.close(e), false)\n\n    // Закрывает при клике на кнопку ✕\n    this.closer.on('click', e => this.close(e), false)\n  }\n\n  close(e) {\n    e.preventDefault()\n    this.show = false\n    viewportScrolling.start()\n    this.modal.classList.remove('is-active')\n    this.modal.on(transitionEnd, e => {\n      if (e.propertyName == this.endAnimate) {\n        document.body.removeChild(this.modal)\n      }\n    })\n  }\n}","/**\n * Offline plugin (ServiceWorker, AppCache) for webpack\n * https://github.com/NekR/offline-plugin/blob/master/docs/runtime.md\n * require('offline-plugin/runtime').install();\n */\n\nimport * as runtime from 'offline-plugin/runtime'\n// runtime.install()\n\nruntime.install({\n  onUpdating: () => {\n    console.info('SW runtime Event:', 'onUpdating')\n  },\n  onUpdateReady: () => {\n    console.info('SW runtime Event:', 'onUpdateReady')\n    // Tells to new SW to take control immediately\n    runtime.applyUpdate()\n  },\n  onUpdated: () => {\n    console.info('SW runtime Event:', 'onUpdated')\n    // Reload the webpage to load into the new version\n    window.location.reload()\n  },\n  onUpdateFailed: () => {\n    console.warn('SW runtime Event:', 'onUpdateFailed')\n  },\n})\n\n// setTimeout(() => runtime.applyUpdate(), 5000)\n\n/**\n * Offline state\n */\n\nwindow.addEventListener('offline', () => goOffline())\nwindow.addEventListener('online', () => goOffline())\n\n// Check if device online\n!navigator.onLine && setTimeout(() => goOffline(), 300)\n\n/** offlineReady banner */\nconst offlineReady = document.querySelector('.js-offline-ready')\n\nofflineReady.addEventListener('click', e =>\n  offlineReady.classList.remove('is-active')\n)\n\nfunction goOffline() {\n  !navigator.onLine ? 'is-offline' : 'is-online'\n  if (!navigator.onLine) {\n    // offlineReady.removeAttribute('hidden')\n    offlineReady.classList.add('is-active')\n  } else {\n    // offlineReady.setAttribute('hidden', '')\n    offlineReady.classList.remove('is-active')\n  }\n}"],"sourceRoot":""}